<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pramath Haritz | Portfolio</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config (Embedded) -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        'swiss-black': '#050505',
                        'swiss-white': '#FAFAFA',
                        'swiss-gray': '#888888'
                    },
                    animation: {
                        'marquee': 'marquee 25s linear infinite',
                        'marquee-reverse': 'marquee 25s linear infinite reverse',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(0%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        }
                    },
                    typography: (theme) => ({
                        DEFAULT: {
                            css: {
                                color: theme('colors.swiss-black'),
                                '--tw-prose-body': theme('colors.swiss-black'),
                                '--tw-prose-headings': theme('colors.swiss-black'),
                                '--tw-prose-links': theme('colors.swiss-black'),
                            },
                        },
                        invert: {
                            css: {
                                color: theme('colors.swiss-white'),
                                '--tw-prose-body': theme('colors.swiss-white'),
                                '--tw-prose-headings': theme('colors.swiss-white'),
                                '--tw-prose-links': theme('colors.swiss-white'),
                            },
                        },
                    }),
                }
            }
        }
    </script>

    <!-- Custom CSS (Embedded) -->
    <style>
        body {
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #FAFAFA; 
        }
        ::-webkit-scrollbar-thumb {
            background: #050505; 
        }

        /* Dark Mode Scrollbar */
        .dark ::-webkit-scrollbar-track {
            background: #050505;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #FAFAFA;
        }

        /* Reveal Animation Classes */
        .reveal-text {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .reveal-text.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Mobile Menu Animation Classes */
        .mobile-item {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }
        
        #mobile-menu.open .mobile-item {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Delays for staggered animation */
        #mobile-menu.open .mobile-item:nth-child(1) { transition-delay: 0.1s; }
        #mobile-menu.open .mobile-item:nth-child(2) { transition-delay: 0.2s; }
        #mobile-menu.open .mobile-item:nth-child(3) { transition-delay: 0.3s; }
        #mobile-menu.open .mobile-item:nth-child(4) { transition-delay: 0.4s; }
        #mobile-menu.open .mobile-item:nth-child(5) { transition-delay: 0.5s; }

        /* Image Hover Effect */
        .project-card:hover .project-arrow {
            transform: translateX(5px) translateY(-5px);
        }
        
        /* Navigation Underline */
        .nav-link {
            position: relative;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: -2px;
            left: 0;
            background-color: currentColor;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }
    </style>
</head>
<body class="antialiased selection:bg-black selection:text-white dark:selection:bg-white dark:selection:text-black bg-swiss-white text-swiss-black dark:bg-swiss-black dark:text-swiss-white transition-colors duration-300 w-full">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-swiss-white/90 dark:bg-swiss-black/90 backdrop-blur-sm border-b border-black/5 dark:border-white/10 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center relative">
            <!-- Logo -->
            <a href="#" onclick="switchView('home'); return false;" class="font-display font-bold text-xl tracking-tighter z-50 text-swiss-black dark:text-swiss-white relative">
                PH.
            </a>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8 font-sans text-sm tracking-wide">
                <button onclick="switchView('home')" class="nav-link uppercase">Home</button>
                <button onclick="scrollToSection('about')" class="nav-link uppercase">About</button>
                <button onclick="scrollToSection('projects')" class="nav-link uppercase">Work</button>
                <button onclick="switchView('blog')" class="nav-link uppercase">Journal</button>
                <button onclick="scrollToSection('contact')" class="nav-link uppercase">Contact</button>
                
                <!-- Desktop Toggle -->
                <button onclick="toggleTheme()" class="ml-4 p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors" aria-label="Toggle Dark Mode">
                    <svg class="w-5 h-5 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    <svg class="w-5 h-5 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
                </button>
            </div>

            <!-- Mobile Hamburger Button (High Z-Index to sit above menu) -->
            <div class="md:hidden z-50">
                <button id="menu-btn" class="flex flex-col gap-1.5 p-2 group focus:outline-none" aria-label="Menu">
                    <span class="w-6 h-0.5 bg-black dark:bg-white transition-all duration-300 origin-center group-hover:w-8"></span>
                    <span class="w-6 h-0.5 bg-black dark:bg-white transition-all duration-300 origin-center group-hover:w-8"></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay (Moved OUTSIDE nav to ensure full coverage) -->
    <!-- Added z-40 to sit just below the nav bar header (z-50) so the close button remains visible -->
    <div id="mobile-menu" class="fixed inset-0 h-screen w-screen bg-swiss-white dark:bg-swiss-black opacity-0 pointer-events-none transition-all duration-500 flex flex-col justify-between items-center py-24 px-6 md:hidden z-40">
        
        <!-- Navigation Links -->
        <div class="flex flex-col items-center justify-center space-y-6 flex-1">
            <button onclick="mobileNav('home')" class="mobile-item font-display text-5xl sm:text-6xl font-medium text-black dark:text-white hover:text-swiss-gray transition-colors">HOME</button>
            <button onclick="mobileNav('about')" class="mobile-item font-display text-5xl sm:text-6xl font-medium text-black dark:text-white hover:text-swiss-gray transition-colors">ABOUT</button>
            <button onclick="mobileNav('projects')" class="mobile-item font-display text-5xl sm:text-6xl font-medium text-black dark:text-white hover:text-swiss-gray transition-colors">WORK</button>
            <button onclick="mobileNav('blog')" class="mobile-item font-display text-5xl sm:text-6xl font-medium text-black dark:text-white hover:text-swiss-gray transition-colors">JOURNAL</button>
            <button onclick="mobileNav('contact')" class="mobile-item font-display text-5xl sm:text-6xl font-medium text-black dark:text-white hover:text-swiss-gray transition-colors">CONTACT</button>
        </div>

        <!-- Mobile Footer Controls -->
        <div class="flex flex-col items-center gap-8 mobile-item">
            <!-- Mobile Theme Toggle -->
            <button onclick="toggleTheme()" class="flex items-center gap-3 px-6 py-2 rounded-full border border-black/10 dark:border-white/10 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors">
                <span class="text-xs font-mono uppercase tracking-widest">Switch Theme</span>
                <svg class="w-4 h-4 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                <svg class="w-4 h-4 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            </button>

            <div class="flex gap-6 text-swiss-gray">
                <a href="#" class="text-sm font-mono uppercase hover:text-black dark:hover:text-white">Twitter</a>
                <a href="#" class="text-sm font-mono uppercase hover:text-black dark:hover:text-white">LinkedIn</a>
            </div>
        </div>
    </div>

    <!-- VIEW: HOME -->
    <main id="home-view" class="transition-opacity duration-500">
        
        <!-- Hero Section -->
        <section class="min-h-screen flex flex-col justify-center px-6 pt-28 md:pt-20 relative border-b border-black/10 dark:border-white/10 overflow-hidden">
            <canvas id="hero-canvas" class="absolute inset-0 w-full h-full z-0 opacity-40 pointer-events-none"></canvas>
            
            <div class="relative z-10 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="col-span-12 lg:col-span-8">
                    <p class="font-sans text-swiss-gray mb-4 reveal-text uppercase tracking-widest text-xs">Spectrum Lab, IISc Bangalore</p>
                    <!-- Responsive font sizing -->
                    <h1 class="font-display text-5xl sm:text-6xl md:text-8xl lg:text-9xl font-medium leading-[0.9] tracking-tighter mb-8 reveal-text" style="transition-delay: 100ms;">
                        PRAMATH<br>HARITZ
                    </h1>
                    <p class="font-sans text-lg md:text-xl max-w-lg leading-relaxed text-swiss-black/80 dark:text-swiss-white/80 reveal-text" style="transition-delay: 200ms;">
                        building cool things.
                    </p>
                </div>
                
                <div class="col-span-12 lg:col-span-4 flex items-end justify-start lg:justify-end pb-4 reveal-text" style="transition-delay: 300ms;">
                    <div class="text-left lg:text-right">
                        <p class="font-sans text-sm text-swiss-gray mb-1">Current Focus</p>
                        <p class="font-display text-xl border-b border-black dark:border-white inline-block pb-0.5">ChaksuAI</p>
                    </div>
                </div>
            </div>

            <!-- Moved arrow from left-6 to left-1/2 -translate-x-1/2 (Centered) to prevent overlap with text -->
            <div class="absolute bottom-12 left-1/2 -translate-x-1/2 animate-bounce hidden md:block">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 5V19M12 19L5 12M12 19L19 12" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-24 px-6 border-b border-black/10 dark:border-white/10">
            <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-12 gap-12">
                <div class="md:col-span-4 reveal-text">
                    <span class="font-mono text-xs border border-black dark:border-white rounded-full px-2 py-1">01</span>
                    <h2 class="font-display text-4xl mt-4 uppercase tracking-tight">About Me</h2>
                    
                    <!-- Profile Image -->
                    <div class="mt-8 relative group w-64 h-64">
                        <!-- SVG Placeholder to replace external image -->
                        <img src="assets/display_picture3.png" 
                             alt="Pramath Haritz" 
                             class="w-full h-full object-cover rounded-full grayscale group-hover:grayscale-0 transition-all duration-700 ease-out"
                        >
                        <!-- Subtle border ring -->
                        <div class="absolute inset-0 rounded-full border border-black/10 dark:border-white/10"></div>
                    </div>
                </div>
                <div class="md:col-span-8 space-y-8 reveal-text" style="transition-delay: 100ms;">
                    <p class="font-sans text-2xl md:text-3xl leading-tight font-light">
                        I am currently working at <span class="font-medium border-b border-black dark:border-white">Spectrum Lab, IISc Bangalore</span>. My work exists at the intersection of technical precision and artistic intuition.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 pt-8">
                        <div>
                            <h3 class="font-display text-lg font-bold mb-4 uppercase border-b border-black/10 dark:border-white/10 pb-2">Technical Domain</h3>
                            <p class="text-swiss-gray text-sm leading-relaxed mb-6">
                                I focus on solving complex problems in Computer Vision and Biomedical Signal Processing, striving to make AI interpretable and impactful.
                            </p>
                            <div class="font-mono text-xs uppercase tracking-widest leading-loose text-black dark:text-white mb-8">
                                Computer Vision <span class="text-swiss-gray px-1">/</span> 
                                Generative Modeling <span class="text-swiss-gray px-1">/</span> 
                                Biomedical Signal Processing
                            </div>
                            <a href="#" class="inline-flex items-center gap-2 font-mono text-xs uppercase border border-black dark:border-white px-5 py-2.5 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-all duration-300 group">
                                Download Resume 
                                <span class="group-hover:translate-y-0.5 transition-transform duration-300">↓</span>
                            </a>
                        </div>
                        <div>
                            <h3 class="font-display text-lg font-bold mb-4 uppercase border-b border-black/10 dark:border-white/10 pb-2">Personal Ethos</h3>
                            <p class="text-swiss-gray text-sm leading-relaxed mb-6">
                                Outside the terminal, I’m powered almost entirely by specialty coffee. I adore every form of art, and when all this chaos eventually settles, you’ll probably find me on a farm somewhere—sipping fancy coffee, contemplating the universe, and pretending I know something about music.
                            </p>
                            <div class="font-mono text-xs uppercase tracking-widest leading-loose text-black dark:text-white">
                                Specialty Coffee <span class="text-swiss-gray px-1">/</span> 
                                Art <span class="text-swiss-gray px-1">/</span> 
                                Philosophy
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-24 px-6 border-b border-black/10 dark:border-white/10">
            <div class="max-w-7xl mx-auto">
                <div class="flex justify-between items-end mb-16 reveal-text">
                    <div>
                        <span class="font-mono text-xs border border-black dark:border-white rounded-full px-2 py-1">02</span>
                        <h2 class="font-display text-4xl mt-4 uppercase tracking-tight">Selected Work</h2>
                    </div>
                </div>

                <!-- Project Item 1 -->
                <div class="group relative border-t border-black/10 dark:border-white/10 py-12 project-card cursor-pointer reveal-text">
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 items-center">
                        <div class="md:col-span-2 text-swiss-gray font-mono text-sm">2024 — Present</div>
                        <div class="md:col-span-6">
                            <!-- Reduced mobile font size for Project Title -->
                            <h3 class="font-display text-4xl sm:text-5xl md:text-6xl font-medium tracking-tighter mb-2 group-hover:opacity-70 transition-opacity">ChaksuAI</h3>
                            <p class="font-sans text-sm md:text-base text-swiss-gray">Last-Mile Vision Care, Powered by AI</p>
                        </div>
                        <div class="md:col-span-4 flex md:justify-end">
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 border border-black/20 dark:border-white/20 rounded-full text-xs uppercase">Computer Vision</span>
                                <span class="px-3 py-1 border border-black/20 dark:border-white/20 rounded-full text-xs uppercase">Healthcare</span>
                            </div>
                            <a href="https://chaksu.ai/" target="_blank" class="ml-4 project-arrow transition-transform duration-300">↗</a>           
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-24 px-6 bg-swiss-black dark:bg-swiss-white text-swiss-white dark:text-swiss-black transition-colors duration-300">
            <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
                <div>
                    <span class="font-mono text-xs border border-white dark:border-black rounded-full px-2 py-1">03</span>
                    <h2 class="font-display text-5xl md:text-6xl mt-8 uppercase tracking-tight leading-none">Let's create<br>something timeless.</h2>
                    <p class="mt-8 text-swiss-gray font-sans max-w-md">
                        Always open to discussing AI ethics, design systems, or the perfect extraction time for an Ethiopian pour-over.
                    </p>
                </div>
                <div class="flex flex-col justify-end items-start md:items-end space-y-4">
                    <a href="mailto:pramath@spectrum.iisc" class="font-display text-2xl md:text-4xl hover:underline decoration-1 underline-offset-4">pramath@spectrum.iisc</a>
                    <div class="flex space-x-6 text-sm font-mono uppercase tracking-widest text-swiss-gray">
                        <a href="#" class="hover:text-white dark:hover:text-black transition-colors">LinkedIn</a>
                        <a href="#" class="hover:text-white dark:hover:text-black transition-colors">GitHub</a>
                        <a href="#" class="hover:text-white dark:hover:text-black transition-colors">Twitter</a>
                    </div>
                </div>
            </div>
        </section>

        <footer class="py-6 px-6 border-t border-black/10 dark:border-white/10 flex justify-between items-center text-xs uppercase font-mono text-swiss-gray">
            <div>© 2025 Pramath Haritz</div>
            <div>Designed in Bangalore</div>
        </footer>
    </main>

    <!-- VIEW: BLOG (Hidden by default) -->
    <main id="blog-view" class="hidden pt-24 px-6 min-h-screen bg-white dark:bg-swiss-black transition-colors duration-300">
        <div class="max-w-4xl mx-auto">
            <!-- Blog Header -->
            <div class="mb-16 border-b border-black/10 dark:border-white/10 pb-8">
                <h1 class="font-display text-6xl md:text-7xl uppercase tracking-tighter mb-4">The Journal</h1>
                <p class="font-sans text-swiss-gray">Thoughts on Tech, Philosophy, and Art.</p>
            </div>

            <!-- Filters -->
            <div class="flex space-x-2 mb-12 font-mono text-sm overflow-x-auto pb-2">
                <button onclick="filterBlogs('all')" id="btn-all" class="blog-filter active px-4 py-2 border border-black dark:border-white bg-black dark:bg-white text-white dark:text-black rounded-full transition-colors">All</button>
                <button onclick="filterBlogs('tech')" id="btn-tech" class="blog-filter px-4 py-2 border border-black dark:border-white hover:bg-black dark:hover:bg-white hover:text-white dark:hover:text-black rounded-full transition-colors">Technical</button>
                <button onclick="filterBlogs('notes')" id="btn-notes" class="blog-filter px-4 py-2 border border-black dark:border-white hover:bg-black dark:hover:bg-white hover:text-white dark:hover:text-black rounded-full transition-colors">Philosophy & Design</button>
            </div>

            <!-- Blog List Container -->
            <div id="blog-container" class="space-y-12 pb-24">
                <!-- JavaScript will inject posts here -->
            </div>
        </div>
    </main>

    <!-- VIEW: BLOG READ (New View) -->
    <main id="blog-read-view" class="hidden pt-24 px-6 min-h-screen bg-white dark:bg-swiss-black transition-colors duration-300">
        <div class="max-w-3xl mx-auto pb-24">
            <button onclick="switchView('blog')" class="mb-12 group flex items-center gap-2 font-mono text-xs uppercase tracking-widest text-swiss-gray hover:text-black dark:hover:text-white transition-colors">
                <span class="group-hover:-translate-x-1 transition-transform">←</span> Back to Journal
            </button>
            
            <div id="blog-content-area" class="reveal-text active">
                <!-- Content injected here -->
            </div>
        </div>
    </main>

    <!-- App Logic -->
    <script>
        // --- DATA ---
        // Embedded Blogs.json content
        const blogsData = [
            {
                "id": 1,
                "title": "Understanding Vision Transformers",
                "category": "tech",
                "date": "Oct 12, 2024",
                "excerpt": "How attention mechanisms are reshaping computer vision beyond traditional CNN architectures.",
                "readTime": "8 min read",
                "file": "posts/vision-transformers.md"
            },
            {
                "id": 2,
                "title": "The Swiss Style: Grid Systems",
                "category": "notes",
                "date": "Sep 28, 2024",
                "excerpt": "Why Josef Müller-Brockmann's principles matter more than ever in modern UI design.",
                "readTime": "5 min read",
                "file": "posts/swiss-style.md"
            }
        ];

        // Embedded Markdown Content
        const blogContent = {
            "posts/vision-transformers.md": `
For the better part of the last decade, Convolutional Neural Networks (CNNs) have reigned supreme in computer vision. Their translation invariance and local inductive bias made them perfect for understanding images. However, the introduction of the Vision Transformer (ViT) marked a paradigm shift.

### Breaking the Grid

Unlike CNNs, which process pixels in rigid grids, Transformers treat images as sequences of patches. This allows the model to attend to global context from the very first layer.

> "The removal of inductive bias is not a bug, but a feature."

In our experiments at Spectrum Lab, we've observed that while ViTs lack the inductive bias of CNNs—requiring more data to train—they scale remarkably well.
            `,
            "posts/swiss-style.md": `
The International Typographic Style, or Swiss Style, emerged in the 1950s, emphasizing cleanliness, readability, and objectivity. In an era of chaotic digital interfaces, these principles provide a much-needed anchor.

### Mathematical Beauty

At the core of Swiss design is the grid. It is not a constraint, but a liberation. By defining a rigorous structure, the designer is free to play with asymmetry and negative space while maintaining harmony.

In web design, CSS Grid and Flexbox have finally given us the tools to implement these print-based philosophies natively in the browser.

Modern minimalism often gets confused with "emptiness." True Swiss minimalism is about the economy of means—using the absolute minimum elements necessary to communicate the message effectively. It relies on strong typography (often Akzidenz-Grotesk or Helvetica) to carry the visual weight.
            `
        };


        // --- THEME LOGIC ---
        // Check for saved theme preference
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }

        function toggleTheme() {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
        }

        // --- BLOG SYSTEM ---
        let blogs = []; 

        // Load blogs from static data instead of fetch
        function loadBlogs() {
            blogs = blogsData;
            renderBlogs(blogs);
        }

        // --- APP LOGIC ---

        // Scroll Animation Observer
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, observerOptions);

        function initObservers() {
            document.querySelectorAll('.reveal-text').forEach(el => observer.observe(el));
        }

        // Navigation Switching
        function switchView(viewName) {
            const homeView = document.getElementById('home-view');
            const blogView = document.getElementById('blog-view');
            const blogReadView = document.getElementById('blog-read-view');
            
            // Close mobile menu if open
            toggleMobileMenu(false);
            
            window.scrollTo(0,0);

            [homeView, blogView, blogReadView].forEach(el => {
                if(el && !el.classList.contains('hidden')) {
                    el.style.opacity = '0';
                    setTimeout(() => el.classList.add('hidden'), 300);
                }
            });

            setTimeout(() => {
                if (viewName === 'home') {
                    if(homeView) {
                        homeView.classList.remove('hidden');
                        setTimeout(() => homeView.style.opacity = '1', 50);
                        initObservers();
                        initHeroAnimation(); 
                    }
                } else if (viewName === 'blog') {
                    if(blogView) {
                        blogView.classList.remove('hidden');
                        setTimeout(() => blogView.style.opacity = '1', 50);
                        filterBlogs('all'); 
                    }
                } else if (viewName === 'read') {
                    if(blogReadView) {
                        blogReadView.classList.remove('hidden');
                        setTimeout(() => blogReadView.style.opacity = '1', 50);
                    }
                }
            }, 300);
        }

        function scrollToSection(id) {
            // First ensure we are on home view
            const homeView = document.getElementById('home-view');
            if (homeView.classList.contains('hidden')) {
                switchView('home');
                // Wait for transition then scroll
                setTimeout(() => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth' });
                    }
                }, 400);
            } else {
                // Close menu if open
                toggleMobileMenu(false);
                
                const element = document.getElementById(id);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                }
            }
        }

        function mobileNav(destination) {
            if(destination === 'blog') switchView('blog');
            else if (destination === 'home') switchView('home');
            else scrollToSection(destination);
        }

        // UPDATED: Fetch Markdown content from static object
        function openBlog(id) {
            const blog = blogs.find(b => b.id === id);
            if (!blog) return;

            const contentArea = document.getElementById('blog-content-area');
            
            // Show loading state
            contentArea.innerHTML = `<div class="animate-pulse text-swiss-gray">Loading article...</div>`;
            switchView('read');

            try {
                // Look up content in static object instead of fetch
                const markdownText = blogContent[blog.file];
                
                if (!markdownText) throw new Error('Article content not found');
                
                // Convert Markdown to HTML using marked.js
                const htmlContent = marked.parse(markdownText);

                contentArea.innerHTML = `
                    <div class="mb-8 border-b border-black/10 dark:border-white/10 pb-8">
                        <div class="flex items-center gap-3 mb-6 text-xs font-mono uppercase tracking-widest text-swiss-gray">
                            <span>${blog.date}</span>
                            <span>—</span>
                            <span class="${blog.category === 'tech' ? 'text-blue-600 dark:text-blue-400' : 'text-orange-600 dark:text-orange-400'}">${blog.category === 'tech' ? 'Technology' : 'Notes'}</span>
                            <span>—</span>
                            <span>${blog.readTime}</span>
                        </div>
                        <h1 class="font-display text-4xl md:text-6xl font-medium leading-tight mb-4">${blog.title}</h1>
                    </div>
                    <div class="prose prose-lg max-w-none font-serif dark:prose-invert">
                        ${htmlContent}
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `<p class="text-red-500">Error loading content.</p>`;
                console.error(error);
            }
        }

        // --- NEW MOBILE MENU LOGIC ---
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        let isMenuOpen = false;

        function toggleMobileMenu(forceState) {
            isMenuOpen = forceState !== undefined ? forceState : !isMenuOpen;
            
            const spans = menuBtn.querySelectorAll('span');
            
            if (isMenuOpen) {
                // Open Menu
                mobileMenu.classList.remove('pointer-events-none', 'opacity-0');
                mobileMenu.classList.add('open');
                document.body.style.overflow = 'hidden'; // Lock scroll
                
                // Hamburger to X
                spans[0].classList.add('rotate-45', 'translate-y-1.5');
                spans[1].classList.add('-rotate-45', '-translate-y-1.5');
                spans[0].classList.remove('group-hover:w-8');
                spans[1].classList.remove('group-hover:w-8');
            } else {
                // Close Menu
                mobileMenu.classList.add('pointer-events-none', 'opacity-0');
                mobileMenu.classList.remove('open');
                document.body.style.overflow = ''; // Unlock scroll
                
                // X to Hamburger
                spans[0].classList.remove('rotate-45', 'translate-y-1.5');
                spans[1].classList.remove('-rotate-45', '-translate-y-1.5');
                spans[0].classList.add('group-hover:w-8');
                spans[1].classList.add('group-hover:w-8');
            }
        }

        if (menuBtn) {
            menuBtn.addEventListener('click', () => toggleMobileMenu());
        }

        // Blog Functionality
        function renderBlogs(items) {
            const container = document.getElementById('blog-container');
            if (!container) return;
            container.innerHTML = '';
            
            if (items.length === 0) {
                container.innerHTML = '<p class="text-swiss-gray font-mono text-sm">No entries found.</p>';
                return;
            }

            items.forEach(blog => {
                const article = document.createElement('article');
                article.className = 'group cursor-pointer border-b border-black/10 dark:border-white/10 pb-8 reveal-text active';
                article.setAttribute('onclick', `openBlog(${blog.id})`);
                
                article.innerHTML = `
                    <div class="flex items-center gap-3 mb-3 text-xs font-mono uppercase tracking-widest text-swiss-gray">
                        <span>${blog.date}</span>
                        <span>—</span>
                        <span class="${blog.category === 'tech' ? 'text-blue-600 dark:text-blue-400' : 'text-orange-600 dark:text-orange-400'}">${blog.category === 'tech' ? 'Technology' : 'Notes'}</span>
                    </div>
                    <h2 class="font-display text-3xl md:text-4xl font-medium mb-3 group-hover:underline decoration-1 underline-offset-4">${blog.title}</h2>
                    <p class="font-sans text-swiss-gray max-w-2xl text-lg leading-relaxed mb-4">${blog.excerpt}</p>
                    <div class="flex items-center gap-2 font-mono text-xs uppercase group-hover:translate-x-2 transition-transform duration-300">
                        Read Article <span>→</span>
                    </div>
                `;
                container.appendChild(article);
            });
        }

        function filterBlogs(category) {
            document.querySelectorAll('.blog-filter').forEach(btn => {
                btn.className = 'blog-filter px-4 py-2 border border-black dark:border-white hover:bg-black dark:hover:bg-white hover:text-white dark:hover:text-black rounded-full transition-colors';
            });
            
            const activeBtn = document.getElementById(`btn-${category}`);
            if(activeBtn) {
                activeBtn.className = 'blog-filter active px-4 py-2 border border-black dark:border-white bg-black dark:bg-white text-white dark:text-black rounded-full transition-colors';
            }

            if (category === 'all') {
                renderBlogs(blogs);
            } else {
                const filtered = blogs.filter(b => b.category === category);
                renderBlogs(filtered);
            }
        }

        // Initialization
        window.addEventListener('DOMContentLoaded', () => {
            initObservers();
            initHeroAnimation();
            loadBlogs();
        });

        // --- HERO FOURIER ANIMATION ---
        let animationId; 

        function initHeroAnimation() {
            const canvas = document.getElementById('hero-canvas');
            if (!canvas) return;
            
            if (animationId) cancelAnimationFrame(animationId);

            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const centerY = canvas.height / 2;
            const baseAmplitude = canvas.height / 8; 
            let time = 0;
            let cycle = 0; 

            function getThemeColorStr() {
                const isDark = document.documentElement.classList.contains('dark');
                return isDark ? '255, 255, 255' : '5, 5, 5';
            }

            const harmonics = [
                { freq: 1, amp: 1 },
                { freq: 3, amp: 1/3 },
                { freq: 5, amp: 1/5 },
                { freq: 7, amp: 1/7 },
                { freq: 9, amp: 1/9 }
            ];

            function animate() {
                const themeColor = getThemeColorStr();
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                time += 0.015;
                cycle += 0.005;

                const separation = (Math.sin(cycle) + 1) / 2;
                
                harmonics.forEach((h, index) => {
                    ctx.beginPath();
                    ctx.lineWidth = 1;
                    const spreadY = (index - 2) * 60 * separation; 
                    
                    const currentAmplitude = baseAmplitude * h.amp;
                    const opacity = 0.1 + (0.3 * separation);

                    ctx.strokeStyle = `rgba(${themeColor}, ${opacity})`;

                    for (let x = 0; x < canvas.width; x++) {
                        const y = centerY + spreadY + Math.sin(x * 0.01 * h.freq + time * h.freq) * currentAmplitude;
                        if (x === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                });

                ctx.beginPath();
                ctx.lineWidth = 2;
                ctx.strokeStyle = `rgba(${themeColor}, ${0.8 - (0.4 * separation)})`; 

                for (let x = 0; x < canvas.width; x++) {
                    let ySum = 0;
                    harmonics.forEach(h => {
                        ySum += Math.sin(x * 0.01 * h.freq + time * h.freq) * (baseAmplitude * h.amp);
                    });
                    ctx.lineTo(x, centerY + ySum);
                }
                ctx.stroke();

                animationId = requestAnimationFrame(animate);
            }

            animate();
        }

        window.addEventListener('resize', () => {
            initHeroAnimation();
        });
    </script>
</body>
</html>
